{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { BeneficiarioFormComponent } from '../../components/beneficiario-form/beneficiario-form.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/beneficiario/beneficiario.service\";\nimport * as i2 from \"primeng/dynamicdialog\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../../../shared/components/toolbar-navigation/toolbar-navigation.component\";\nimport * as i6 from \"../../components/beneficiario-table/beneficiario-table.component\";\nexport class BeneficiarioHomeComponent {\n  constructor(beneficiarioService, dialogService, messageService, confirmationService, router) {\n    this.beneficiarioService = beneficiarioService;\n    this.dialogService = dialogService;\n    this.messageService = messageService;\n    this.confirmationService = confirmationService;\n    this.router = router;\n    this.destroy$ = new Subject();\n    this.beneficiarioDatas = [];\n  }\n  ngOnInit() {\n    this.getAllBeneficiario();\n  }\n  getAllBeneficiario() {\n    this.beneficiarioService['getAllBeneficiarios']().pipe(takeUntil(this.destroy$)).subscribe(response => {\n      this.beneficiarioDatas = response;\n    }, err => {\n      console.error('Erro ao buscar beneficiários:', err);\n      this.messageService.add({\n        severity: 'error',\n        summary: 'Erro',\n        detail: 'Erro ao buscar os beneficiários!',\n        life: 3000\n      });\n      this.router.navigate(['/dashboard']);\n    });\n  }\n  handleDeleteBeneficiarioAction(event) {\n    if (event) {\n      this.confirmationService.confirm({\n        message: `Confirma a exclusão do Beneficiário: ${event?.BeneficiarioName}`,\n        header: 'Confirmação de exclusão',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: 'Sim',\n        rejectLabel: 'Não',\n        accept: () => this.deleteBeneficiario(event.beneficiario_id)\n      });\n    }\n  }\n  deleteBeneficiario(beneficiario_id) {\n    this.beneficiarioService['deleteBeneficiario'](beneficiario_id).pipe(takeUntil(this.destroy$)).subscribe({\n      next: response => {\n        this.getAllBeneficiario();\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Sucesso',\n          detail: 'Beneficiário removido com sucesso!',\n          life: 3000\n        });\n      },\n      error: err => {\n        console.error('Erro ao remover beneficiário:', err);\n        this.getAllBeneficiario();\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Erro',\n          detail: 'Erro ao remover beneficiário!',\n          life: 3000\n        });\n      }\n    });\n  }\n  handleBeneficiarioAction(event) {\n    if (event) {\n      this.ref = this.dialogService.open(BeneficiarioFormComponent, {\n        header: 'Editar Beneficiário',\n        width: '70%',\n        contentStyle: {\n          overflow: 'auto'\n        },\n        baseZIndex: 10000,\n        maximizable: true,\n        data: {\n          event: event\n        }\n      });\n      if (this.ref) {\n        this.ref.onClose.pipe(takeUntil(this.destroy$)).subscribe(() => {\n          this.getAllBeneficiario();\n        });\n      }\n    }\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\nBeneficiarioHomeComponent.ɵfac = function BeneficiarioHomeComponent_Factory(t) {\n  return new (t || BeneficiarioHomeComponent)(i0.ɵɵdirectiveInject(i1.BeneficiarioService), i0.ɵɵdirectiveInject(i2.DialogService), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i3.ConfirmationService), i0.ɵɵdirectiveInject(i4.Router));\n};\nBeneficiarioHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BeneficiarioHomeComponent,\n  selectors: [[\"app-beneficiario-home\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"beneficiario\", \"deleteBeneficiarioEvent\", \"beneficiarioEvent\"]],\n  template: function BeneficiarioHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-toolbar-navigation\");\n      i0.ɵɵelementStart(1, \"app-beneficiario-table\", 0);\n      i0.ɵɵlistener(\"deleteBeneficiarioEvent\", function BeneficiarioHomeComponent_Template_app_beneficiario_table_deleteBeneficiarioEvent_1_listener($event) {\n        return ctx.handleDeleteBeneficiarioAction($event);\n      })(\"beneficiarioEvent\", function BeneficiarioHomeComponent_Template_app_beneficiario_table_beneficiarioEvent_1_listener($event) {\n        return ctx.handleBeneficiarioAction($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"beneficiario\", ctx.beneficiarioDatas);\n    }\n  },\n  dependencies: [i5.ToolbarNavigationComponent, i6.BeneficiarioTableComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Subject","takeUntil","BeneficiarioFormComponent","BeneficiarioHomeComponent","constructor","beneficiarioService","dialogService","messageService","confirmationService","router","ngOnInit","getAllBeneficiario","pipe","destroy$","subscribe","response","beneficiarioDatas","err","console","error","add","severity","summary","detail","life","navigate","handleDeleteBeneficiarioAction","event","confirm","message","BeneficiarioName","header","icon","acceptLabel","rejectLabel","accept","deleteBeneficiario","beneficiario_id","next","handleBeneficiarioAction","ref","open","width","contentStyle","overflow","baseZIndex","maximizable","data","onClose","ngOnDestroy","complete","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\CaioCoelho\\Desktop\\AULA-55\\src\\app\\modules\\beneficiario\\page\\beneficiario-home\\beneficiario-home.component.ts","C:\\Users\\CaioCoelho\\Desktop\\AULA-55\\src\\app\\modules\\beneficiario\\page\\beneficiario-home\\beneficiario-home.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { DialogService, DynamicDialogRef } from 'primeng/dynamicdialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { BeneficiarioService } from 'src/app/services/beneficiario/beneficiario.service';\nimport { GetBeneficiarioResponse } from 'src/app/models/interfaces/beneficiario/responses/GetBeneficiarioResponse';\nimport { DeleteBeneficiarioAction } from 'src/app/models/interfaces/beneficiario/event/DeleteBeneficiarioAction';\nimport { EditBeneficiarioAction } from 'src/app/models/interfaces/beneficiario/event/EditBeneficiarioAction';\nimport { BeneficiarioFormComponent } from '../../components/beneficiario-form/beneficiario-form.component';\n\n@Component({\n  selector: 'app-beneficiario-home',\n  templateUrl: './beneficiario-home.component.html',\n  styleUrls: []\n})\nexport class BeneficiarioHomeComponent implements OnInit, OnDestroy {\n  private readonly destroy$: Subject<void> = new Subject();\n  private ref!: DynamicDialogRef;\n  public beneficiarioDatas: GetBeneficiarioResponse[] = [];\n\n  constructor(\n    private beneficiarioService: BeneficiarioService,\n    private dialogService: DialogService,\n    private messageService: MessageService,\n    private confirmationService: ConfirmationService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.getAllBeneficiario();\n  }\n\n  getAllBeneficiario(): void {\n    this.beneficiarioService['getAllBeneficiarios']()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(\n        (response: GetBeneficiarioResponse[]) => {\n          this.beneficiarioDatas = response;\n        },\n        (err: any) => {\n          console.error('Erro ao buscar beneficiários:', err);\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Erro',\n            detail: 'Erro ao buscar os beneficiários!',\n            life: 3000\n          });\n          this.router.navigate(['/dashboard']);\n        }\n      );\n  }\n\n  handleDeleteBeneficiarioAction(event: DeleteBeneficiarioAction): void {\n    if (event) {\n      this.confirmationService.confirm({\n        message: `Confirma a exclusão do Beneficiário: ${event?.BeneficiarioName}`,\n        header: 'Confirmação de exclusão',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: 'Sim',\n        rejectLabel: 'Não',\n        accept: () => this.deleteBeneficiario(event.beneficiario_id)\n      });\n    }\n  }\n\n  deleteBeneficiario(beneficiario_id: string): void {\n    this.beneficiarioService['deleteBeneficiario'](beneficiario_id)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe({\n        next: (response: any) => {\n          this.getAllBeneficiario();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Sucesso',\n            detail: 'Beneficiário removido com sucesso!',\n            life: 3000\n          });\n        },\n        error: (err: any) => {\n          console.error('Erro ao remover beneficiário:', err);\n          this.getAllBeneficiario();\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Erro',\n            detail: 'Erro ao remover beneficiário!',\n            life: 3000\n          });\n        }\n      });\n  }\n\n  handleBeneficiarioAction(event: EditBeneficiarioAction): void {\n    if (event) {\n      this.ref = this.dialogService.open(BeneficiarioFormComponent, {\n        header: 'Editar Beneficiário',\n        width: '70%',\n        contentStyle: { overflow: 'auto' },\n        baseZIndex: 10000,\n        maximizable: true,\n        data: {\n          event: event\n        }\n      });\n\n      if (this.ref) {\n        this.ref.onClose.pipe(takeUntil(this.destroy$)).subscribe(() => {\n          this.getAllBeneficiario();\n        });\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<app-toolbar-navigation></app-toolbar-navigation>\n\n<app-beneficiario-table\n  [beneficiario]=\"beneficiarioDatas\"\n  (deleteBeneficiarioEvent)=\"handleDeleteBeneficiarioAction($event)\"\n  (beneficiarioEvent)=\"handleBeneficiarioAction($event)\"\n></app-beneficiario-table>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}