{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DoadorFormComponent } from '../../components/doador-form/doador-form.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/doador/doador.service\";\nimport * as i2 from \"primeng/dynamicdialog\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../../../shared/components/toolbar-navigation/toolbar-navigation.component\";\nimport * as i6 from \"../../components/doador-table/doador-table.component\";\nexport class DoadorHomeComponent {\n  constructor(doadorService, dialogService, messageService, confirmationService, router) {\n    this.doadorService = doadorService;\n    this.dialogService = dialogService;\n    this.messageService = messageService;\n    this.confirmationService = confirmationService;\n    this.router = router;\n    this.destroy$ = new Subject();\n    this.doadorDatas = [];\n  }\n  ngOnInit() {\n    this.getAllDoador();\n  }\n  getAllDoador() {\n    this.doadorService['getAllDoador']().pipe(takeUntil(this.destroy$)).subscribe({\n      next: response => {\n        if (response.length > 0) {\n          this.doadorDatas = response;\n        }\n      },\n      //Rota para quando dar algum erro na busca das informações\n      error: err => {\n        console.log(err);\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Erro',\n          detail: 'Erro ao buscar os doador!',\n          life: 3000\n        });\n        this.router.navigate(['/dashboard']);\n      }\n    });\n  }\n  handleDeleteDoadorAction(event) {\n    if (event) {\n      this.confirmationService.confirm({\n        message: `Confirma a exclusão do Doador: ${event?.doadorName}`,\n        header: 'Confirmação de exclusão',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: 'Sim',\n        rejectLabel: 'Não',\n        accept: () => this.deleteDoador(event?.doador_id)\n      });\n    }\n  }\n  deleteDoador(doador_id) {\n    if (doador_id) {\n      this.doadorService['deleteDoador']({\n        doador_id\n      }).pipe(takeUntil(this.destroy$)).subscribe({\n        next: response => {\n          this.getAllDoador();\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Sucesso',\n            detail: 'Categoria removida com sucesso!',\n            life: 3000\n          });\n        },\n        error: err => {\n          console.log(err);\n          this.getAllDoador();\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Erro',\n            detail: 'Erro ao remover categoria!',\n            life: 3000\n          });\n        }\n      });\n    }\n  }\n  handleDoadorAction(event) {\n    if (event) {\n      this.ref = this.dialogService.open(DoadorFormComponent, {\n        header: event?.action,\n        width: '70%',\n        contentStyle: {\n          overflow: 'auto'\n        },\n        baseZIndex: 10000,\n        maximizable: true,\n        data: {\n          event: event\n        }\n      });\n      this.ref.onClose.pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => this.getAllDoador()\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\nDoadorHomeComponent.ɵfac = function DoadorHomeComponent_Factory(t) {\n  return new (t || DoadorHomeComponent)(i0.ɵɵdirectiveInject(i1.DoadorService), i0.ɵɵdirectiveInject(i2.DialogService), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i3.ConfirmationService), i0.ɵɵdirectiveInject(i4.Router));\n};\nDoadorHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DoadorHomeComponent,\n  selectors: [[\"app-doador-home\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"doador\", \"deleteDoadorEvent\", \"DoadorEvent\"]],\n  template: function DoadorHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-toolbar-navigation\");\n      i0.ɵɵelementStart(1, \"app-doador-table\", 0);\n      i0.ɵɵlistener(\"deleteDoadorEvent\", function DoadorHomeComponent_Template_app_doador_table_deleteDoadorEvent_1_listener($event) {\n        return ctx.handleDeleteDoadorAction($event);\n      })(\"DoadorEvent\", function DoadorHomeComponent_Template_app_doador_table_DoadorEvent_1_listener($event) {\n        return ctx.handleDoadorAction($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"doador\", ctx.doadorDatas);\n    }\n  },\n  dependencies: [i5.ToolbarNavigationComponent, i6.DoadorTableComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Subject","takeUntil","DoadorFormComponent","DoadorHomeComponent","constructor","doadorService","dialogService","messageService","confirmationService","router","ngOnInit","getAllDoador","pipe","destroy$","subscribe","next","response","length","doadorDatas","error","err","console","log","add","severity","summary","detail","life","navigate","handleDeleteDoadorAction","event","confirm","message","doadorName","header","icon","acceptLabel","rejectLabel","accept","deleteDoador","doador_id","handleDoadorAction","ref","open","action","width","contentStyle","overflow","baseZIndex","maximizable","data","onClose","ngOnDestroy","complete","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\CaioCoelho\\Desktop\\AULA-55\\src\\app\\modules\\doador\\page\\doador-home\\doador-home.component.ts","C:\\Users\\CaioCoelho\\Desktop\\AULA-55\\src\\app\\modules\\doador\\page\\doador-home\\doador-home.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { DialogService, DynamicDialogRef } from 'primeng/dynamicdialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DeleteDoadorAction } from 'src/app/models/interfaces/doador/event/DeleteDoadorAction';\nimport { GetDoadorResponse } from 'src/app/models/interfaces/doador/responses/GetDoadorResponse';\nimport { EventAction } from 'src/app/models/interfaces/products/event/EventAction';\nimport { DoadorService } from 'src/app/services/doador/doador.service';\nimport { DoadorFormComponent } from '../../components/doador-form/doador-form.component';\n\n\n\n@Component({\n  selector: 'app-doador-home',\n  templateUrl: './doador-home.component.html',\n  styleUrls: []\n})\nexport class DoadorHomeComponent implements OnInit, OnDestroy {\n  private readonly destroy$: Subject<void> = new Subject();\n  private ref!: DynamicDialogRef;\n  public doadorDatas: Array<GetDoadorResponse> = [];\n\n  constructor(\n    private doadorService: DoadorService,\n    private dialogService: DialogService,\n    private messageService: MessageService,\n    private confirmationService: ConfirmationService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    this.getAllDoador();\n  }\n\n  getAllDoador() {\n    this.doadorService['getAllDoador']()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe({\n        next: (response: GetDoadorResponse[]) => {\n          if (response.length > 0) {\n            this.doadorDatas = response;\n          }\n        },\n                //Rota para quando dar algum erro na busca das informações\n        error: (err: any) => {\n          console.log(err);\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Erro',\n            detail: 'Erro ao buscar os doador!',\n            life: 3000,\n          });\n          this.router.navigate(['/dashboard']);\n        },\n      });\n  }\n\n  handleDeleteDoadorAction(event: DeleteDoadorAction): void {\n    if (event) {\n      this.confirmationService.confirm({\n        message: `Confirma a exclusão do Doador: ${event?.doadorName}`,\n        header: 'Confirmação de exclusão',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: 'Sim',\n        rejectLabel: 'Não',\n        accept: () => this.deleteDoador(event?.doador_id),\n      });\n    }\n  }\n\n  deleteDoador(doador_id: string): void {\n    if (doador_id) {\n      this.doadorService['deleteDoador']({ doador_id })\n        .pipe(takeUntil(this.destroy$))\n        .subscribe({\n          next: (response: any) => {\n            this.getAllDoador();\n            this.messageService.add({\n              severity: 'success',\n              summary: 'Sucesso',\n              detail: 'Categoria removida com sucesso!',\n              life: 3000,\n            });\n          },\n          error: (err: any) => {\n            console.log(err);\n            this.getAllDoador();\n            this.messageService.add({\n              severity: 'error',\n              summary: 'Erro',\n              detail: 'Erro ao remover categoria!',\n              life: 3000,\n            });\n          },\n        });\n    }\n  }\n\n  handleDoadorAction(event: EventAction): void {\n    if (event) {\n      this.ref = this.dialogService.open(DoadorFormComponent, {\n        header: event?.action,\n        width: '70%',\n        contentStyle: { overflow: 'auto' },\n        baseZIndex: 10000,\n        maximizable: true,\n        data: {\n          event: event,\n        },\n      });\n\n      this.ref.onClose.pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => this.getAllDoador(),\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<app-toolbar-navigation></app-toolbar-navigation>\n\n<app-doador-table\n  [doador]=\"doadorDatas\"\n  (deleteDoadorEvent)=\"handleDeleteDoadorAction($event)\"\n  (DoadorEvent)=\"handleDoadorAction($event)\"\n></app-doador-table>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}